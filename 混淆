const _0x59ce78=_0x486e;(function(_0xdc94aa,_0x259082){const _0x4cf19c=_0x486e,_0x172a9e=_0xdc94aa();while(!![]){try{const _0x554508=parseInt(_0x4cf19c(0x11e))/0x1+parseInt(_0x4cf19c(0x160))/0x2*(parseInt(_0x4cf19c(0x134))/0x3)+parseInt(_0x4cf19c(0x169))/0x4*(-parseInt(_0x4cf19c(0x196))/0x5)+parseInt(_0x4cf19c(0x1a7))/0x6*(-parseInt(_0x4cf19c(0x14a))/0x7)+parseInt(_0x4cf19c(0x116))/0x8*(parseInt(_0x4cf19c(0x12c))/0x9)+parseInt(_0x4cf19c(0x156))/0xa*(-parseInt(_0x4cf19c(0x152))/0xb)+-parseInt(_0x4cf19c(0x10f))/0xc*(parseInt(_0x4cf19c(0x12f))/0xd);if(_0x554508===_0x259082)break;else _0x172a9e['push'](_0x172a9e['shift']());}catch(_0x1a7f0c){_0x172a9e['push'](_0x172a9e['shift']());}}}(_0x1b27,0xb5d84));import{connect}from'cloudflare:sockets';let userID=_0x59ce78(0x157),proxyIP='sjc.o00o.ooo',sub=_0x59ce78(0x177),subconverter=_0x59ce78(0x144),subconfig='https://raw.githubusercontent.com/cmliu/ACL4SSR/main/Clash/config/ACL4SSR_Online_Full_MultiMode.ini',socks5Address='',RproxyIP=_0x59ce78(0x18f);if(!isValidUUID(userID))throw new Error(_0x59ce78(0x1a3));let parsedSocks5Address={},enableSocks=![],fakeUserID=generateUUID(),fakeHostName=generateRandomString(),tls=!![];export default{async 'fetch'(_0x2e896c,_0x483dd2,_0x3649bf){const _0x122cc0=_0x59ce78;try{const _0x537cb8=_0x2e896c[_0x122cc0(0x163)][_0x122cc0(0x11f)]('User-Agent')[_0x122cc0(0x133)]();userID=(_0x483dd2[_0x122cc0(0x13a)]||userID)[_0x122cc0(0x133)](),proxyIP=_0x483dd2[_0x122cc0(0x19d)]||proxyIP;const _0x477de9=await ADD(proxyIP);proxyIP=_0x477de9[Math[_0x122cc0(0x12e)](Math[_0x122cc0(0x149)]()*_0x477de9[_0x122cc0(0x114)])],socks5Address=_0x483dd2['SOCKS5']||socks5Address,sub=_0x483dd2[_0x122cc0(0x17f)]||sub,subconverter=_0x483dd2['SUBAPI']||subconverter,subconfig=_0x483dd2['SUBCONFIG']||subconfig;if(socks5Address){RproxyIP=_0x483dd2[_0x122cc0(0x120)]||_0x122cc0(0x18f);try{parsedSocks5Address=socks5AddressParser(socks5Address),enableSocks=!![];}catch(_0x1fd9ed){let _0xf2d754=_0x1fd9ed;console[_0x122cc0(0x170)](_0xf2d754[_0x122cc0(0x18a)]()),enableSocks=![];}}else RproxyIP=_0x483dd2[_0x122cc0(0x120)]||!proxyIP?_0x122cc0(0x1a6):_0x122cc0(0x18f);const _0x348435=_0x2e896c['headers'][_0x122cc0(0x11f)]('Upgrade'),_0x188545=new URL(_0x2e896c['url']);if(_0x188545[_0x122cc0(0x186)][_0x122cc0(0x17d)](_0x122cc0(0x14c)))tls=![];if(!_0x348435||_0x348435!==_0x122cc0(0x158))switch(_0x188545[_0x122cc0(0x11d)][_0x122cc0(0x133)]()){case'/':return new Response(JSON[_0x122cc0(0x161)](_0x2e896c['cf'],null,0x4),{'status':0xc8});case'/'+userID:{const _0x3d7678=await getVLESSConfig(userID,_0x2e896c['headers'][_0x122cc0(0x11f)](_0x122cc0(0x115)),sub,_0x537cb8,RproxyIP),_0x406d3b=Date['now'](),_0x534bb8=Math[_0x122cc0(0x12e)](_0x406d3b/0x3e8),_0x1d0899=0xf4849500,_0x349f16=new Date(_0x406d3b);_0x349f16[_0x122cc0(0x123)](0x0,0x0,0x0,0x0);const _0x526cc1=Math['floor']((_0x406d3b-_0x349f16['getTime']())/0x5265c00*0x18*0x10000000000/0x2);return _0x537cb8&&_0x537cb8[_0x122cc0(0x168)](_0x122cc0(0x17a))?new Response(''+_0x3d7678,{'status':0xc8,'headers':{'Content-Type':_0x122cc0(0x16c)}}):new Response(''+_0x3d7678,{'status':0xc8,'headers':{'Content-Disposition':_0x122cc0(0x164),'Content-Type':_0x122cc0(0x16c),'Profile-Update-Interval':'6','Subscription-Userinfo':_0x122cc0(0x187)+_0x526cc1+_0x122cc0(0x18e)+_0x526cc1+_0x122cc0(0x1a5)+0x18*0x10000000000+_0x122cc0(0x15a)+_0x1d0899}});}default:return new Response('Not\x20found',{'status':0x194});}else{if(new RegExp(_0x122cc0(0x154),'i')[_0x122cc0(0x178)](_0x188545['pathname']))proxyIP=_0x188545[_0x122cc0(0x11d)][_0x122cc0(0x155)]('=')[0x1];else{if(new RegExp(_0x122cc0(0x199),'i')[_0x122cc0(0x178)](_0x188545['pathname']))proxyIP=_0x188545[_0x122cc0(0x11d)]['split'](_0x122cc0(0x199))[0x1];else{if(!proxyIP||proxyIP=='')proxyIP='proxyip.fxxk.dedyn.io';}}return await vlessOverWSHandler(_0x2e896c);}}catch(_0x180b08){let _0x350c74=_0x180b08;return new Response(_0x350c74['toString']());}}};async function vlessOverWSHandler(_0xf988d2){const _0x45a42f=_0x59ce78,_0x520788=new WebSocketPair(),[_0x3556ae,_0x16266f]=Object['values'](_0x520788);_0x16266f['accept']();let _0x486747='',_0x3d1b72='';const _0x301398=(_0x33f8ef,_0xd866eb)=>{const _0x2651b1=_0x486e;console[_0x2651b1(0x170)]('['+_0x486747+':'+_0x3d1b72+']\x20'+_0x33f8ef,_0xd866eb||'');},_0x2cf028=_0xf988d2[_0x45a42f(0x163)][_0x45a42f(0x11f)](_0x45a42f(0x122))||'',_0x44b9c4=makeReadableWebSocketStream(_0x16266f,_0x2cf028,_0x301398);let _0x47d9bc={'value':null},_0x163839=![];return _0x44b9c4[_0x45a42f(0x18d)](new WritableStream({async 'write'(_0x2bbcda,_0x4fb001){const _0x1b87af=_0x45a42f;if(_0x163839)return await handleDNSQuery(_0x2bbcda,_0x16266f,null,_0x301398);if(_0x47d9bc[_0x1b87af(0x112)]){const _0x154a4c=_0x47d9bc[_0x1b87af(0x112)][_0x1b87af(0x16b)][_0x1b87af(0x171)]();await _0x154a4c['write'](_0x2bbcda),_0x154a4c['releaseLock']();return;}const {hasError:_0x1114de,message:_0x25aa5d,addressType:_0x47d26f,portRemote:portRemote=0x1bb,addressRemote:addressRemote='',rawDataIndex:_0x28bdb8,vlessVersion:vlessVersion=new Uint8Array([0x0,0x0]),isUDP:_0x12ce5f}=processVlessHeader(_0x2bbcda,userID);_0x486747=addressRemote,_0x3d1b72=portRemote+'--'+Math[_0x1b87af(0x149)]()+'\x20'+(_0x12ce5f?'udp\x20':_0x1b87af(0x125))+'\x20';if(_0x1114de){throw new Error(_0x25aa5d);return;}if(_0x12ce5f){if(portRemote===0x35)_0x163839=!![];else{throw new Error(_0x1b87af(0x127));return;}}const _0x5e7f2f=new Uint8Array([vlessVersion[0x0],0x0]),_0xf3fe42=_0x2bbcda[_0x1b87af(0x19f)](_0x28bdb8);if(_0x163839)return handleDNSQuery(_0xf3fe42,_0x16266f,_0x5e7f2f,_0x301398);handleTCPOutBound(_0x47d9bc,_0x47d26f,addressRemote,portRemote,_0xf3fe42,_0x16266f,_0x5e7f2f,_0x301398);},'close'(){const _0x2bf149=_0x45a42f;_0x301398(_0x2bf149(0x193));},'abort'(_0x281ea1){const _0x4a6ddc=_0x45a42f;_0x301398(_0x4a6ddc(0x12d),JSON[_0x4a6ddc(0x161)](_0x281ea1));}}))['catch'](_0x309290=>{const _0xe67e77=_0x45a42f;_0x301398(_0xe67e77(0x142),_0x309290);}),new Response(null,{'status':0x65,'webSocket':_0x3556ae});}async function handleTCPOutBound(_0x49edc1,_0x158e4a,_0x33241c,_0x1ca9d7,_0x4fcf4f,_0x5b765f,_0x3d7dc3,_0x37119a){async function _0x56c88c(_0x2d2356,_0x2ef906,_0x187800=![]){const _0x15117d=_0x486e,_0x5ac074=_0x187800?await socks5Connect(_0x158e4a,_0x2d2356,_0x2ef906,_0x37119a):connect({'hostname':_0x2d2356,'port':_0x2ef906});_0x49edc1[_0x15117d(0x112)]=_0x5ac074,_0x37119a(_0x15117d(0x181)+_0x2d2356+':'+_0x2ef906);const _0x589cfc=_0x5ac074[_0x15117d(0x16b)][_0x15117d(0x171)]();return await _0x589cfc[_0x15117d(0x11a)](_0x4fcf4f),_0x589cfc['releaseLock'](),_0x5ac074;}async function _0x4cfd03(){const _0x2896f3=_0x486e;enableSocks?_0x524c09=await _0x56c88c(_0x33241c,_0x1ca9d7,!![]):_0x524c09=await _0x56c88c(proxyIP||_0x33241c,_0x1ca9d7),_0x524c09[_0x2896f3(0x15d)][_0x2896f3(0x17b)](_0x4403b9=>{const _0x1f6542=_0x2896f3;console[_0x1f6542(0x170)](_0x1f6542(0x11b),_0x4403b9);})[_0x2896f3(0x129)](()=>{safeCloseWebSocket(_0x5b765f);}),remoteSocketToWS(_0x524c09,_0x5b765f,_0x3d7dc3,null,_0x37119a);}let _0x524c09=await _0x56c88c(_0x33241c,_0x1ca9d7);remoteSocketToWS(_0x524c09,_0x5b765f,_0x3d7dc3,_0x4cfd03,_0x37119a);}function _0x1b27(){const _0x1e7e71=[';\x20total=','true','5197182bYsPEf','remoteConnection!.readable\x20abort','byteLength','releaseLock','CF-Workers-edgetunnel/cmliu','abcdefghijklmnopqrstuvwxyz','\x0a\x09---------------------------------------------------------------\x0a\x09\x0a\x09','1819764WyoccV','\x20提供维护支持,\x20自动获取ProxyIP:\x20',':443?encryption=none&security=tls&sni=','value','function','length','Host','8nVZjgd','close','%26uuid%3D','socks\x20connection\x20opened','write','retry\x20tcpSocket\x20closed\x20error','addressValue\x20is\x20empty,\x20addressType\x20is\x20','pathname','919928iTZjjK','get','RPROXYIP','\x20expected:\x205','sec-websocket-protocol','setHours','.xyz','tcp\x20','join','UDP\x20proxy\x20only\x20enable\x20for\x20DNS\x20which\x20is\x20port\x2053','Stringified\x20UUID\x20is\x20invalid','finally','\x0a\x09\x20\x20client-fingerprint:\x20chrome\x0a\x09\x20\x20ws-opts:\x0a\x09\x09path:\x20\x22/?ed=2560\x22\x0a\x09\x09headers:\x0a\x09\x09\x20\x20host:\x20','\x20is\x20not\x20support,\x20command\x2001-tcp,02-udp,03-mux','5535774gslNFj','readableWebSocketStream\x20is\x20abort','floor','65QgmWoO','encode','replace','nekobox','toLowerCase','50109NPtEiC','command\x20','invild\x20\x20addressType\x20is\x20','clash','.workers.dev','dns\x20server(','UUID','sent\x20socks\x20request','://','singbox','worker','/sub?target=clash&url=https%3A%2F%2F','decode','no\x20acceptable\x20methods','readableWebSocketStream\x20pipeTo\x20error','from','apiurl.v1.mk','8.8.4.4','\x0a\x09\x20\x20port:\x20443\x0a\x09\x20\x20uuid:\x20','pop','flatMap','random','7fXFytN','readyState','notls','Invalid\x20SOCKS\x20address\x20format','\x0a\x09\x20\x20server:\x20',')\x20tcp\x20is\x20close','socks\x20server\x20version\x20error:\x20','&uuid=','3831377yktxRm','readable','/proxyip=','split','10TzedXt','e5f6300b-00c7-4027-81b9-e983b80cb73d','websocket','https://',';\x20expire=','\x0a\x09---------------------------------------------------------------\x0a\x09################################################################\x0a\x09clash-meta\x0a\x09---------------------------------------------------------------\x0a\x09-\x20type:\x20','%26edgetunnel%3Dcmliu%26proxyip%3D','closed','getUint16','%2Fsub%3Fhost%3D','162SJHcyy','stringify','retry','headers','attachment;\x20filename=edgetunnel;\x20filename*=utf-8\x27\x27edgetunnel','map','&edgetunnel=cmliu&proxyip=','Error\x20fetching\x20content:','includes','340764lCTZYl','fail\x20to\x20open\x20socks\x20connection','writable','text/plain;charset=utf-8','webSocketServer\x20has\x20error','please\x20provide\x20username/password','fromCharCode','log','getWriter','error','&emoji=true&list=false&tfo=false&scv=true&fdn=false&sort=false&new_name=true','\x0a\x09################################################################\x0a\x09v2ray\x0a\x09---------------------------------------------------------------\x0a\x09','addEventListener','&insert=false&config=','yxdy.cfdaizc3.us.kg','test','send','mozilla','catch','\x0a\x09---------------------------------------------------------------\x0a\x09################################################################\x0a\x09v2ray\x0a\x09---------------------------------------------------------------\x0a\x09','has','.pages.dev','SUB','charAt','connected\x20to\x20',')\x20tcp\x20is\x20abort','socks\x20server\x20needs\x20auth','handleDNSQuery\x20have\x20exception,\x20error:\x20','webSocket.readyState\x20is\x20not\x20open,\x20maybe\x20close','searchParams','upload=','$1-$2-$3-$4-$5','read','toString','invalid\x20data','getReader','pipeTo',';\x20download=','false','buffer','remoteSocketToWS\x20has\x20exception\x20','/sub?host=','readableWebSocketStream\x20is\x20close','arrayBuffer','\x0a\x09################################################################\x0a\x09Subscribe\x20/\x20sub\x20订阅地址,\x20支持\x20Base64、clash-meta、sing-box\x20订阅格式,\x20您的订阅内容由\x20','10IYxtgk','&path=%2F%3Fed%3D2560#','message','/proxyip.','\x0a\x09\x20\x20name:\x20','enqueue','data','PROXYIP','Error\x20fetching\x20content:\x20','slice','.\x0a\x09---------------------------------------------------------------\x0a\x09https://','\x0a\x09\x20\x20network:\x20ws\x0a\x09\x20\x20tls:\x20true\x0a\x09\x20\x20udp:\x20false\x0a\x09\x20\x20sni:\x20','fail\x20to\x20auth\x20socks\x20server','uuid\x20is\x20not\x20valid','sing-box'];_0x1b27=function(){return _0x1e7e71;};return _0x1b27();}function makeReadableWebSocketStream(_0x2cb71d,_0x1f552f,_0xb8907b){let _0x1d7797=![];const _0x5ea1c8=new ReadableStream({'start'(_0x5e767c){const _0x113b2d=_0x486e;_0x2cb71d[_0x113b2d(0x175)](_0x113b2d(0x198),_0x1b974b=>{const _0x4f7122=_0x113b2d;if(_0x1d7797)return;const _0x4a07f2=_0x1b974b[_0x4f7122(0x19c)];_0x5e767c[_0x4f7122(0x19b)](_0x4a07f2);}),_0x2cb71d[_0x113b2d(0x175)](_0x113b2d(0x117),()=>{const _0x35ca05=_0x113b2d;safeCloseWebSocket(_0x2cb71d);if(_0x1d7797)return;_0x5e767c[_0x35ca05(0x117)]();}),_0x2cb71d['addEventListener']('error',_0x544206=>{const _0x4e9281=_0x113b2d;_0xb8907b(_0x4e9281(0x16d)),_0x5e767c[_0x4e9281(0x172)](_0x544206);});const {earlyData:_0x1392ce,error:_0x59eabc}=base64ToArrayBuffer(_0x1f552f);if(_0x59eabc)_0x5e767c[_0x113b2d(0x172)](_0x59eabc);else _0x1392ce&&_0x5e767c['enqueue'](_0x1392ce);},'pull'(_0x3aa0b8){},'cancel'(_0xac952c){if(_0x1d7797)return;_0xb8907b('ReadableStream\x20was\x20canceled,\x20due\x20to\x20'+_0xac952c),_0x1d7797=!![],safeCloseWebSocket(_0x2cb71d);}});return _0x5ea1c8;}function processVlessHeader(_0x2e4ea5,_0x46dd75){const _0x2b9b58=_0x59ce78;if(_0x2e4ea5[_0x2b9b58(0x10a)]<0x18)return{'hasError':!![],'message':_0x2b9b58(0x18b)};const _0x2af25f=new Uint8Array(_0x2e4ea5[_0x2b9b58(0x19f)](0x0,0x1));let _0x45e530=![],_0xbf2b72=![];stringify(new Uint8Array(_0x2e4ea5[_0x2b9b58(0x19f)](0x1,0x11)))===_0x46dd75&&(_0x45e530=!![]);if(!_0x45e530)return{'hasError':!![],'message':'invalid\x20user'};const _0x28b4a8=new Uint8Array(_0x2e4ea5[_0x2b9b58(0x19f)](0x11,0x12))[0x0],_0x48944f=new Uint8Array(_0x2e4ea5[_0x2b9b58(0x19f)](0x12+_0x28b4a8,0x12+_0x28b4a8+0x1))[0x0];if(_0x48944f===0x1){}else{if(_0x48944f===0x2)_0xbf2b72=!![];else return{'hasError':!![],'message':_0x2b9b58(0x135)+_0x48944f+_0x2b9b58(0x12b)};}const _0x55f33a=0x12+_0x28b4a8+0x1,_0x338994=_0x2e4ea5[_0x2b9b58(0x19f)](_0x55f33a,_0x55f33a+0x2),_0x2e0848=new DataView(_0x338994)[_0x2b9b58(0x15e)](0x0);let _0x2ba578=_0x55f33a+0x2;const _0x2fb4dc=new Uint8Array(_0x2e4ea5[_0x2b9b58(0x19f)](_0x2ba578,_0x2ba578+0x1)),_0x2dcc6f=_0x2fb4dc[0x0];let _0x3c099f=0x0,_0x3c6cd3=_0x2ba578+0x1,_0x557c87='';switch(_0x2dcc6f){case 0x1:_0x3c099f=0x4,_0x557c87=new Uint8Array(_0x2e4ea5[_0x2b9b58(0x19f)](_0x3c6cd3,_0x3c6cd3+_0x3c099f))[_0x2b9b58(0x126)]('.');break;case 0x2:_0x3c099f=new Uint8Array(_0x2e4ea5[_0x2b9b58(0x19f)](_0x3c6cd3,_0x3c6cd3+0x1))[0x0],_0x3c6cd3+=0x1,_0x557c87=new TextDecoder()[_0x2b9b58(0x140)](_0x2e4ea5[_0x2b9b58(0x19f)](_0x3c6cd3,_0x3c6cd3+_0x3c099f));break;case 0x3:_0x3c099f=0x10;const _0x437d83=new DataView(_0x2e4ea5[_0x2b9b58(0x19f)](_0x3c6cd3,_0x3c6cd3+_0x3c099f)),_0x505c0d=[];for(let _0x52b238=0x0;_0x52b238<0x8;_0x52b238++){_0x505c0d['push'](_0x437d83[_0x2b9b58(0x15e)](_0x52b238*0x2)['toString'](0x10));}_0x557c87=_0x505c0d[_0x2b9b58(0x126)](':');break;default:return{'hasError':!![],'message':'invild\x20\x20addressType\x20is\x20'+_0x2dcc6f};}if(!_0x557c87)return{'hasError':!![],'message':_0x2b9b58(0x11c)+_0x2dcc6f};return{'hasError':![],'addressRemote':_0x557c87,'addressType':_0x2dcc6f,'portRemote':_0x2e0848,'rawDataIndex':_0x3c6cd3+_0x3c099f,'vlessVersion':_0x2af25f,'isUDP':_0xbf2b72};}function _0x486e(_0x5009f8,_0x385d15){const _0x1b27d2=_0x1b27();return _0x486e=function(_0x486e73,_0x44a711){_0x486e73=_0x486e73-0x10a;let _0x32eb1f=_0x1b27d2[_0x486e73];return _0x32eb1f;},_0x486e(_0x5009f8,_0x385d15);}async function remoteSocketToWS(_0x18bf91,_0x1781a5,_0x45c472,_0xd20931,_0x2966c4){const _0x20a608=_0x59ce78;let _0x2a2596=0x0,_0x41ffd4=[],_0x265045=_0x45c472,_0x5d04c3=![];await _0x18bf91[_0x20a608(0x153)][_0x20a608(0x18d)](new WritableStream({'start'(){},async 'write'(_0x90419f,_0x17cbbe){const _0x29d454=_0x20a608;_0x5d04c3=!![],_0x1781a5[_0x29d454(0x14b)]!==WS_READY_STATE_OPEN&&_0x17cbbe[_0x29d454(0x172)](_0x29d454(0x185)),_0x265045?(_0x1781a5[_0x29d454(0x179)](await new Blob([_0x265045,_0x90419f])[_0x29d454(0x194)]()),_0x265045=null):_0x1781a5[_0x29d454(0x179)](_0x90419f);},'close'(){_0x2966c4('remoteConnection!.readable\x20is\x20close\x20with\x20hasIncomingData\x20is\x20'+_0x5d04c3);},'abort'(_0x5b03d2){const _0x379131=_0x20a608;console['error'](_0x379131(0x1a8),_0x5b03d2);}}))['catch'](_0x187a94=>{const _0x4d387c=_0x20a608;console['error'](_0x4d387c(0x191),_0x187a94['stack']||_0x187a94),safeCloseWebSocket(_0x1781a5);}),_0x5d04c3===![]&&_0xd20931&&(_0x2966c4(_0x20a608(0x162)),_0xd20931());}function base64ToArrayBuffer(_0x10fdaa){const _0x1aab56=_0x59ce78;if(!_0x10fdaa)return{'error':null};try{_0x10fdaa=_0x10fdaa[_0x1aab56(0x131)](/-/g,'+')[_0x1aab56(0x131)](/_/g,'/');const _0x5942d9=atob(_0x10fdaa),_0x1a1183=Uint8Array[_0x1aab56(0x143)](_0x5942d9,_0x3a42ba=>_0x3a42ba['charCodeAt'](0x0));return{'earlyData':_0x1a1183[_0x1aab56(0x190)],'error':null};}catch(_0x5335b7){return{'error':_0x5335b7};}}function isValidUUID(_0x2ea95e){const _0x33315d=_0x59ce78,_0x48bf00=/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;return _0x48bf00[_0x33315d(0x178)](_0x2ea95e);}const WS_READY_STATE_OPEN=0x1,WS_READY_STATE_CLOSING=0x2;function safeCloseWebSocket(_0x5d9ec0){const _0x178b13=_0x59ce78;try{(_0x5d9ec0['readyState']===WS_READY_STATE_OPEN||_0x5d9ec0['readyState']===WS_READY_STATE_CLOSING)&&_0x5d9ec0[_0x178b13(0x117)]();}catch(_0x13cacf){console[_0x178b13(0x172)]('safeCloseWebSocket\x20error',_0x13cacf);}}const byteToHex=[];for(let i=0x0;i<0x100;++i){byteToHex['push']((i+0x100)[_0x59ce78(0x18a)](0x10)[_0x59ce78(0x19f)](0x1));}function unsafeStringify(_0x494d45,_0xfb0aa2=0x0){return(byteToHex[_0x494d45[_0xfb0aa2+0x0]]+byteToHex[_0x494d45[_0xfb0aa2+0x1]]+byteToHex[_0x494d45[_0xfb0aa2+0x2]]+byteToHex[_0x494d45[_0xfb0aa2+0x3]]+'-'+byteToHex[_0x494d45[_0xfb0aa2+0x4]]+byteToHex[_0x494d45[_0xfb0aa2+0x5]]+'-'+byteToHex[_0x494d45[_0xfb0aa2+0x6]]+byteToHex[_0x494d45[_0xfb0aa2+0x7]]+'-'+byteToHex[_0x494d45[_0xfb0aa2+0x8]]+byteToHex[_0x494d45[_0xfb0aa2+0x9]]+'-'+byteToHex[_0x494d45[_0xfb0aa2+0xa]]+byteToHex[_0x494d45[_0xfb0aa2+0xb]]+byteToHex[_0x494d45[_0xfb0aa2+0xc]]+byteToHex[_0x494d45[_0xfb0aa2+0xd]]+byteToHex[_0x494d45[_0xfb0aa2+0xe]]+byteToHex[_0x494d45[_0xfb0aa2+0xf]])['toLowerCase']();}function stringify(_0x51ead6,_0x50489f=0x0){const _0x5cb0be=_0x59ce78,_0x298ae0=unsafeStringify(_0x51ead6,_0x50489f);if(!isValidUUID(_0x298ae0))throw TypeError(_0x5cb0be(0x128));return _0x298ae0;}async function handleDNSQuery(_0x5a49ad,_0x275535,_0x5ec7e8,_0x1f69cc){const _0x11c17e=_0x59ce78;try{const _0x3e3eb9=_0x11c17e(0x145),_0x5b8d9a=0x35;let _0xc0fa08=_0x5ec7e8;const _0x19d5ce=connect({'hostname':_0x3e3eb9,'port':_0x5b8d9a});_0x1f69cc('connected\x20to\x20'+_0x3e3eb9+':'+_0x5b8d9a);const _0x270cb6=_0x19d5ce[_0x11c17e(0x16b)][_0x11c17e(0x171)]();await _0x270cb6[_0x11c17e(0x11a)](_0x5a49ad),_0x270cb6[_0x11c17e(0x10b)](),await _0x19d5ce['readable'][_0x11c17e(0x18d)](new WritableStream({async 'write'(_0x5f03a8){const _0x4ccab0=_0x11c17e;_0x275535[_0x4ccab0(0x14b)]===WS_READY_STATE_OPEN&&(_0xc0fa08?(_0x275535['send'](await new Blob([_0xc0fa08,_0x5f03a8])[_0x4ccab0(0x194)]()),_0xc0fa08=null):_0x275535['send'](_0x5f03a8));},'close'(){const _0x122647=_0x11c17e;_0x1f69cc(_0x122647(0x139)+_0x3e3eb9+_0x122647(0x14f));},'abort'(_0x1aab5a){const _0x3318bd=_0x11c17e;console['error'](_0x3318bd(0x139)+_0x3e3eb9+_0x3318bd(0x182),_0x1aab5a);}}));}catch(_0xd20dc){console[_0x11c17e(0x172)](_0x11c17e(0x184)+_0xd20dc[_0x11c17e(0x198)]);}}async function socks5Connect(_0x2bf358,_0x21da0d,_0x11f39d,_0x4f1fe5){const _0x238077=_0x59ce78,{username:_0x485b4b,password:_0x2da490,hostname:_0x2a0565,port:_0x5d639d}=parsedSocks5Address,_0x12501a=connect({'hostname':_0x2a0565,'port':_0x5d639d}),_0x29c0d4=new Uint8Array([0x5,0x2,0x0,0x2]),_0x3a8c13=_0x12501a[_0x238077(0x16b)][_0x238077(0x171)]();await _0x3a8c13['write'](_0x29c0d4),_0x4f1fe5('sent\x20socks\x20greeting');const _0x2fb35a=_0x12501a[_0x238077(0x153)][_0x238077(0x18c)](),_0x53af04=new TextEncoder();let _0x7df294=(await _0x2fb35a['read']())[_0x238077(0x112)];if(_0x7df294[0x0]!==0x5){_0x4f1fe5(_0x238077(0x150)+_0x7df294[0x0]+_0x238077(0x121));return;}if(_0x7df294[0x1]===0xff){_0x4f1fe5(_0x238077(0x141));return;}if(_0x7df294[0x1]===0x2){_0x4f1fe5(_0x238077(0x183));if(!_0x485b4b||!_0x2da490){_0x4f1fe5(_0x238077(0x16e));return;}const _0x513ef4=new Uint8Array([0x1,_0x485b4b[_0x238077(0x114)],..._0x53af04[_0x238077(0x130)](_0x485b4b),_0x2da490[_0x238077(0x114)],..._0x53af04[_0x238077(0x130)](_0x2da490)]);await _0x3a8c13[_0x238077(0x11a)](_0x513ef4),_0x7df294=(await _0x2fb35a[_0x238077(0x189)]())[_0x238077(0x112)];if(_0x7df294[0x0]!==0x1||_0x7df294[0x1]!==0x0){_0x4f1fe5(_0x238077(0x1a2));return;}}let _0x4c6925;switch(_0x2bf358){case 0x1:_0x4c6925=new Uint8Array([0x1,..._0x21da0d[_0x238077(0x155)]('.')[_0x238077(0x165)](Number)]);break;case 0x2:_0x4c6925=new Uint8Array([0x3,_0x21da0d[_0x238077(0x114)],..._0x53af04[_0x238077(0x130)](_0x21da0d)]);break;case 0x3:_0x4c6925=new Uint8Array([0x4,..._0x21da0d[_0x238077(0x155)](':')[_0x238077(0x148)](_0x4a2a0c=>[parseInt(_0x4a2a0c[_0x238077(0x19f)](0x0,0x2),0x10),parseInt(_0x4a2a0c['slice'](0x2),0x10)])]);break;default:_0x4f1fe5(_0x238077(0x136)+_0x2bf358);return;}const _0x5e27b2=new Uint8Array([0x5,0x1,0x0,..._0x4c6925,_0x11f39d>>0x8,_0x11f39d&0xff]);await _0x3a8c13[_0x238077(0x11a)](_0x5e27b2),_0x4f1fe5(_0x238077(0x13b)),_0x7df294=(await _0x2fb35a['read']())[_0x238077(0x112)];if(_0x7df294[0x1]===0x0)_0x4f1fe5(_0x238077(0x119));else{_0x4f1fe5(_0x238077(0x16a));return;}return _0x3a8c13[_0x238077(0x10b)](),_0x2fb35a[_0x238077(0x10b)](),_0x12501a;}function socks5AddressParser(_0x11cba9){const _0x5e28aa=_0x59ce78;let [_0x35d7ad,_0x14a363]=_0x11cba9[_0x5e28aa(0x155)]('@')['reverse'](),_0x54e9d3,_0x33bb99,_0xbee274,_0x2148ee;if(_0x14a363){const _0x48c10a=_0x14a363[_0x5e28aa(0x155)](':');if(_0x48c10a[_0x5e28aa(0x114)]!==0x2)throw new Error(_0x5e28aa(0x14d));[_0x54e9d3,_0x33bb99]=_0x48c10a;}const _0x1f6450=_0x35d7ad['split'](':');_0x2148ee=Number(_0x1f6450[_0x5e28aa(0x147)]());if(isNaN(_0x2148ee))throw new Error('Invalid\x20SOCKS\x20address\x20format');_0xbee274=_0x1f6450['join'](':');const _0x70a436=/^\[.*\]$/;if(_0xbee274[_0x5e28aa(0x168)](':')&&!_0x70a436['test'](_0xbee274))throw new Error(_0x5e28aa(0x14d));return{'username':_0x54e9d3,'password':_0x33bb99,'hostname':_0xbee274,'port':_0x2148ee};}function revertFakeInfo(_0x242334,_0x320356,_0x7f5532,_0x27e8b8){const _0x6ad720=_0x59ce78;if(_0x27e8b8)_0x242334=atob(_0x242334);_0x242334=_0x242334['replace'](new RegExp(fakeUserID,'g'),_0x320356)[_0x6ad720(0x131)](new RegExp(fakeHostName,'g'),_0x7f5532);if(_0x27e8b8)_0x242334=btoa(_0x242334);return _0x242334;}function generateRandomNumber(){let _0xaf5eb2=0x186a0,_0x4a46fc=0xf423f;return Math['floor'](Math['random']()*(_0x4a46fc-_0xaf5eb2+0x1))+_0xaf5eb2;}function generateRandomString(){const _0x1e514b=_0x59ce78;let _0x139a1a=0x2,_0x1fc8ad=0x3,_0x266726=Math[_0x1e514b(0x12e)](Math['random']()*(_0x1fc8ad-_0x139a1a+0x1))+_0x139a1a,_0x3d0dbd=_0x1e514b(0x10d),_0x541ca7='';for(let _0x5cfaf5=0x0;_0x5cfaf5<_0x266726;_0x5cfaf5++){_0x541ca7+=_0x3d0dbd[Math[_0x1e514b(0x12e)](Math[_0x1e514b(0x149)]()*_0x3d0dbd[_0x1e514b(0x114)])];}return _0x541ca7;}function generateUUID(){const _0x18c69c=_0x59ce78;let _0x59a8b6='';for(let _0x290e73=0x0;_0x290e73<0x20;_0x290e73++){let _0x42de2c=Math['floor'](Math[_0x18c69c(0x149)]()*0x10);_0x42de2c<0xa?_0x59a8b6+=_0x42de2c:_0x59a8b6+=String[_0x18c69c(0x16f)](_0x42de2c+0x37);}return _0x59a8b6[_0x18c69c(0x131)](/(.{8})(.{4})(.{4})(.{4})(.{12})/,_0x18c69c(0x188))[_0x18c69c(0x133)]();}async function ADD(_0x36f25d){const _0x558a21=_0x59ce78;var _0x4c43d0=_0x36f25d[_0x558a21(0x131)](/[	 "'\r\n]+/g,',')['replace'](/,+/g,',');if(_0x4c43d0['charAt'](0x0)==',')_0x4c43d0=_0x4c43d0[_0x558a21(0x19f)](0x1);if(_0x4c43d0[_0x558a21(0x180)](_0x4c43d0[_0x558a21(0x114)]-0x1)==',')_0x4c43d0=_0x4c43d0['slice'](0x0,_0x4c43d0[_0x558a21(0x114)]-0x1);const _0x4cab28=_0x4c43d0[_0x558a21(0x155)](',');return _0x4cab28;}let vv='v',ll='l',ee='e',ss='s';async function getVLESSConfig(_0x387018,_0x525548,_0x167f28,_0x8b9d40,_0x4767aa){const _0x207a67=_0x59ce78;if(!_0x167f28||_0x167f28===''){const _0x4616de=''+vv+ll+ee+ss+ss+_0x207a67(0x13c)+_0x387018+'@'+_0x525548+_0x207a67(0x111)+_0x525548+'&fp=randomized&type=ws&host='+_0x525548+'&path=%2F%3Fed%3D2560#'+_0x525548;return _0x207a67(0x174)+_0x4616de+_0x207a67(0x15b)+vv+ll+ee+ss+ss+_0x207a67(0x19a)+_0x525548+'\x0a\x09\x20\x20server:\x20'+_0x525548+_0x207a67(0x146)+_0x387018+_0x207a67(0x1a1)+_0x525548+'\x0a\x09\x20\x20client-fingerprint:\x20chrome\x0a\x09\x20\x20ws-opts:\x0a\x09\x20\x20\x20\x20path:\x20\x22/?ed=2560\x22\x0a\x09\x20\x20\x20\x20headers:\x0a\x09\x09\x20\x20host:\x20'+_0x525548+'\x0a\x09---------------------------------------------------------------\x0a\x09################################################################\x0a\x09';}else{if(_0x167f28&&_0x8b9d40[_0x207a67(0x168)]('mozilla')&&!_0x8b9d40[_0x207a67(0x168)]('linux\x20x86')){const _0x54c03c=''+vv+ll+ee+ss+ss+_0x207a67(0x13c)+_0x387018+'@'+_0x525548+_0x207a67(0x111)+_0x525548+'&fp=randomized&type=ws&host='+_0x525548+_0x207a67(0x197)+_0x525548;return _0x207a67(0x195)+_0x167f28+_0x207a67(0x110)+_0x4767aa+_0x207a67(0x1a0)+_0x525548+'/'+_0x387018+_0x207a67(0x17c)+_0x54c03c+'\x0a\x09---------------------------------------------------------------\x0a\x09################################################################\x0a\x09clash-meta\x0a\x09---------------------------------------------------------------\x0a\x09-\x20type:\x20'+vv+ll+ee+ss+ss+_0x207a67(0x19a)+_0x525548+_0x207a67(0x14e)+_0x525548+'\x0a\x09\x20\x20port:\x20443\x0a\x09\x20\x20uuid:\x20'+_0x387018+_0x207a67(0x1a1)+_0x525548+_0x207a67(0x12a)+_0x525548+_0x207a67(0x10e);}else{if(typeof fetch!=_0x207a67(0x113))return'Error:\x20fetch\x20is\x20not\x20available\x20in\x20this\x20environment.';if(_0x525548[_0x207a67(0x168)](_0x207a67(0x138)))fakeHostName=fakeHostName+'.'+generateRandomString()+generateRandomNumber()+'.workers.dev';else{if(_0x525548['includes'](_0x207a67(0x17e)))fakeHostName=fakeHostName+'.'+generateRandomString()+generateRandomNumber()+_0x207a67(0x17e);else _0x525548[_0x207a67(0x168)](_0x207a67(0x13e))||_0x525548[_0x207a67(0x168)](_0x207a67(0x14c))||tls==![]?fakeHostName='notls.'+fakeHostName+generateRandomNumber()+'.net':fakeHostName=fakeHostName+'.'+generateRandomNumber()+_0x207a67(0x124);}let _0x45c7ef='',_0x196c9b='',_0xcc9ef2=![];if(_0x8b9d40[_0x207a67(0x168)](_0x207a67(0x137))&&!_0x8b9d40['includes'](_0x207a67(0x132)))_0x196c9b=_0x207a67(0x159)+subconverter+_0x207a67(0x13f)+_0x167f28+_0x207a67(0x15f)+fakeHostName+_0x207a67(0x118)+fakeUserID+_0x207a67(0x15c)+_0x4767aa+_0x207a67(0x176)+encodeURIComponent(subconfig)+_0x207a67(0x173);else _0x8b9d40['includes'](_0x207a67(0x1a4))||_0x8b9d40['includes'](_0x207a67(0x13d))?_0x196c9b=_0x207a67(0x159)+subconverter+'/sub?target=singbox&url=https%3A%2F%2F'+_0x167f28+_0x207a67(0x15f)+fakeHostName+_0x207a67(0x118)+fakeUserID+_0x207a67(0x15c)+_0x4767aa+_0x207a67(0x176)+encodeURIComponent(subconfig)+_0x207a67(0x173):(_0x196c9b='https://'+_0x167f28+_0x207a67(0x192)+fakeHostName+_0x207a67(0x151)+fakeUserID+_0x207a67(0x166)+_0x4767aa,_0xcc9ef2=!![]);try{const _0x23b7bc=await fetch(_0x196c9b,{'headers':{'User-Agent':_0x207a67(0x10c)}});return _0x45c7ef=await _0x23b7bc['text'](),revertFakeInfo(_0x45c7ef,_0x387018,_0x525548,_0xcc9ef2);}catch(_0x3660a9){return console[_0x207a67(0x172)](_0x207a67(0x167),_0x3660a9),_0x207a67(0x19e)+_0x3660a9[_0x207a67(0x198)];}}}}
